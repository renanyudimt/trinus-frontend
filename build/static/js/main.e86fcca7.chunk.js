(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{50:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n(0),c=n.n(a),s=n(19),o=n.n(s),l=(n(50),n(10)),i=n(6),u=n(7),d=function(e,t){switch(t.type){case"SET_USER":return{user:t.payload};case"CLEAR":return{user:!1};default:return e}},j=n(1),b={user:!1},p=Object(a.createContext)(b);var x=function(e){var t=e.children,n=Object(a.useReducer)(d,b),r=Object(u.a)(n,2),c=r[0],s=r[1];return Object(j.jsx)(p.Provider,{value:[c,s],children:t})},m=function(){var e=Object(a.useContext)(p),t=Object(u.a)(e,2),n=t[0];t[1];return console.log(n),Object(j.jsxs)("div",{className:"bg-primary min-h-screen flex flex-col items-center justify-center p-4 lg:p-0",children:[Object(j.jsx)("img",{src:"/trinusco.png",alt:"Logo",className:"w-150px lg:w-300px"}),n.user?Object(j.jsxs)("div",{className:"w-full lg:w-400px p-6 rounded-2xl bg-white mt-8",children:[Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsx)("b",{children:"Logado como: "}),Object(j.jsx)("p",{className:"ml-4",children:n.user.name})]}),Object(j.jsxs)("div",{className:"flex items-center",children:[Object(j.jsx)("b",{children:"Email: "}),Object(j.jsx)("p",{className:"ml-4",children:n.user.email})]}),Object(j.jsx)(l.b,{className:"bg-secondary text-white rounded h-40px w-full py-4 mt-4 shadow-md transition duration-300 hover:bg-secondary-light flex items-center justify-center",to:"/uploads",children:"Central de Uploads"})]}):Object(j.jsxs)("div",{className:"bg-white rounded-2xl mt-8 p-4 w-full lg:w-400px h-250px lg:h-400px flex flex-col items-center justify-center",children:[Object(j.jsx)(l.b,{className:"bg-secondary text-white rounded h-40px w-200px py-4 shadow-md transition duration-300 hover:bg-secondary-light flex items-center justify-center",to:"login",children:"Login"}),Object(j.jsx)(l.b,{className:"bg-secondary text-white rounded h-40px w-200px py-4 shadow-md transition duration-300 hover:bg-secondary-light flex items-center justify-center mt-4",to:"Signup",children:"Signup"})]})]})},h=n(9),f=n.n(h),O=n(18),g=n(22),w=n.n(g),y=n(81),v=n(21),N=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),o=s[0],d=s[1],b=Object(a.useContext)(p),x=Object(u.a)(b,2),m=(x[0],x[1]),h=Object(i.f)(),g=Object(v.d)();function N(){return(N=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("https://desafio-trinus-backend.herokuapp.com/login",t,{headers:{"Content-Type":"application/json"}}).then((function(e){m({type:"SET_USER",payload:e.data[0]})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=Object(y.a)((function(e){return function(e){return N.apply(this,arguments)}(e)})),C=S.mutate,k=S.isLoading,E=S.isSuccess,L=S.isError;return Object(a.useEffect)((function(){E&&h.push("/uploads"),L&&g.error("Email ou password incorreto")}),[E,L,g]),Object(j.jsxs)("div",{className:"bg-orange min-h-screen flex flex-col items-center justify-center p-4 lg:p-0",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:"/trinusco.png",alt:"Logo",className:"w-150px lg:w-300px"})}),Object(j.jsx)("div",{className:"bg-white rounded-2xl mt-8 p-4 w-full lg:w-400px h-400px flex flex-col items-center justify-center",children:Object(j.jsxs)("form",{className:"w-full",onSubmit:function(e){e.preventDefault(),C({email:n,password:o})},children:[Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"Email"}),Object(j.jsx)("input",{type:"text",name:"email",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"username",onChange:function(e){return r(e.target.value)},value:n,required:!0})]}),Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"username",onChange:function(e){return d(e.target.value)},value:o,required:!0})]}),Object(j.jsx)("button",{type:"submit",className:"bg-secondary text-white rounded h-40px w-full py-4 shadow-md transition duration-300 hover:bg-secondary-light flex items-center justify-center mt-4",disabled:!!k,children:"Login"})]})})]})},S=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),o=s[0],d=s[1],b=Object(a.useState)(""),x=Object(u.a)(b,2),m=x[0],h=x[1],g=Object(a.useState)(""),N=Object(u.a)(g,2),S=N[0],C=N[1],k=Object(i.f)(),E=Object(v.d)(),L=Object(a.useContext)(p),R=Object(u.a)(L,2),T=(R[0],R[1]),q=Object(y.a)(function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("https://desafio-trinus-backend.herokuapp.com/signup",t,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),T({type:"SET_USER",payload:e.data})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=q.mutate,U=q.isLoading,A=q.isSuccess,D=q.isError;function F(){return(F=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o===S){e.next=5;break}E.error("Senhas nao sao iguais"),e.next=7;break;case 5:return e.next=7,P({name:n,email:m,password:o});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){A&&k.push("/"),D&&E.error("Usuario ja existente")}),[U,D,A]),Object(j.jsxs)("div",{className:"bg-yellow min-h-screen flex flex-col items-center justify-center p-4 lg:p-0",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:"/trinusco.png",alt:"Logo",className:"w-150px lg:w-300px"})}),Object(j.jsx)("div",{className:"bg-white rounded-2xl mt-8 p-4 w-full lg:w-400px h-550px flex flex-col items-center justify-center",children:Object(j.jsxs)("form",{className:"w-full",onSubmit:function(e){return F.apply(this,arguments)},children:[Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"Name"}),Object(j.jsx)("input",{type:"text",name:"username",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"username",onChange:function(e){return r(e.target.value)},value:n,required:!0})]}),Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"E-mail"}),Object(j.jsx)("input",{type:"email",name:"email",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"e-mail",onChange:function(e){return h(e.target.value)},value:m,required:!0})]}),Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"Password",onChange:function(e){return d(e.target.value)},value:o,required:!0})]}),Object(j.jsxs)("div",{className:"flex flex-col w-full mb-6",children:[Object(j.jsx)("label",{children:"Repeat Password"}),Object(j.jsx)("input",{type:"password",name:"repeatpassword",className:"border border-gray-200 border-2 rounded h-35px px-4 mt-2",placeholder:"Password",onChange:function(e){return C(e.target.value)},value:S,required:!0})]}),Object(j.jsx)("button",{type:"submit",className:"bg-secondary text-white rounded h-40px w-full py-4 shadow-md transition duration-300 hover:bg-secondary-light flex items-center justify-center mt-4",disabled:!!U,children:"Signup"})]})})]})},C=n(80),k=n(44),E=n.n(k),L=function(){var e=Object(a.useContext)(p),t=Object(u.a)(e,2),n=t[0],r=(t[1],Object(a.useState)("")),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(y.a)(function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("https://desafio-trinus-backend.herokuapp.com/upload",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){o(e.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=i.mutate,b=i.isLoading;Object(C.a)("uploads",Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://desafio-trinus-backend.herokuapp.com/uploads/".concat(n.user.id)).then((function(e){o(e.data)}));case 2:case"end":return e.stop()}}),e)}))));function x(){return(x=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.saveAs("https://desafio-trinus-backend.herokuapp.com/download/".concat(t),t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:"bg-primary min-h-screen flex flex-col items-center justify-center p-4 lg:p-0",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:"/trinusco.png",alt:"Logo",className:"w-150px lg:w-300px"})}),Object(j.jsxs)("div",{className:" w-full lg:w-400px h-auto bg-white p-6 rounded-lg flex flex-col mt-4",children:[Object(j.jsx)("p",{children:"Selecione o arquivo"}),Object(j.jsx)("input",{disabled:!!b,type:"file",accept:"image/*",className:"h-40px w-full mt-4",onChange:function(e){var t=new FileReader;t.onload=function(){if(2===t.readyState){var r=new FormData;r.set("file",e.target.files[0]),r.set("userId",n.user.id),d(r)}},e.target.files.length>0&&t.readAsDataURL(e.target.files[0])}}),Object(j.jsx)("b",{className:"mt-6",children:"Meus uploads:"}),Object(j.jsx)("ul",{className:"mt-4",children:s&&s.map((function(e,t){return Object(j.jsxs)("li",{className:"flex items-center justify-between",children:[e.fileName,Object(j.jsx)("button",{className:"text-secondary underline hover:text-secondary-light",onClick:function(){return function(e){return x.apply(this,arguments)}(e.fileName)},children:"download"})]},t)}))})]})]})},R=n(27),T=function(e){var t=e.component,n=Object(R.a)(e,["component"]),c=Object(a.useContext)(p),s=Object(u.a)(c,2),o=s[0];s[1];return Object(j.jsx)(a.Fragment,{children:Object(j.jsx)(i.b,Object(r.a)(Object(r.a)({},n),{},{render:function(e){return o.user?Object(j.jsx)(t,Object(r.a)({},n)):Object(j.jsx)(i.a,{to:"/"})}}))})},q=function(e){var t=e.component,n=Object(R.a)(e,["component"]),c=Object(a.useContext)(p),s=Object(u.a)(c,2),o=s[0];s[1];return console.log(o.user),Object(j.jsx)(a.Fragment,{children:Object(j.jsx)(i.b,Object(r.a)(Object(r.a)({},n),{},{render:function(e){return!1!==o.user?Object(j.jsx)(i.a,{to:"/"}):Object(j.jsx)(t,Object(r.a)({},n))}}))})},P=n(79),U=n(25),A=new P.a;var D=function(){return Object(j.jsx)(x,{children:Object(j.jsx)(l.a,{children:Object(j.jsx)(U.a,{client:A,children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(i.b,{path:"/",component:m,exact:!0}),Object(j.jsx)(q,{path:"/login",component:N,exact:!0}),Object(j.jsx)(q,{path:"/signup",component:S,exact:!0}),Object(j.jsx)(T,{path:"/uploads",component:L})]})})})})},F=n(45),_={timeout:5e3,position:v.b.BOTTOM_CENTER,transistion:v.c.SCALE};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(v.a,Object(r.a)(Object(r.a)({template:F.a},_),{},{children:Object(j.jsx)(D,{})}))}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.e86fcca7.chunk.js.map